-- Criar o banco de dados
CREATE DATABASE lojinha;

-- Usar o banco de dados criado
USE lojinha;

-- Tabela Cliente
CREATE TABLE Cliente (
    id_cliente INT PRIMARY KEY AUTO_INCREMENT,
    cidade VARCHAR(100),
    nome VARCHAR(100)
);

-- Tabela Pedidos
CREATE TABLE Pedidos (-- Inserindo dados na tabela Cliente
INSERT INTO Cliente (cidade, nome) VALUES
    ('São Paulo', 'João da Silva'),
    ('Rio de Janeiro', 'Maria Santos'),
    ('Belo Horizonte', 'Pedro Souza');

-- Inserindo dados na tabela Pedidos
INSERT INTO Pedidos (data, valor, id_cliente) VALUES
    ('2023-07-27', 100.50, 1),
    ('2023-07-28', 75.25, 2),
    ('2023-07-28', 120.00, 3);

-- Inserindo dados na tabela Produto
INSERT INTO Produto (nome, preço) VALUES
    ('Camiseta', 29.99),
    ('Calça Jeans', 79.90),
    ('Tênis', 129.99);

-- Inserindo dados na tabela Pedidos_Produtos
INSERT INTO Pedidos_Produtos (id_pedido, id_produto, quantidade) VALUES
    (1, 1, 2),
    (1, 3, 1),
    (2, 1, 3),
    (3, 2, 2),
    (3, 3, 1);

-- Inserindo dados na tabela Categorias
INSERT INTO Categorias (nome) VALUES
    ('Vestuário'),
    ('Calçados'),
    ('Acessórios');

-- Inserindo dados na tabela Categorias_Produtos-- Inserindo dados na tabela Cliente
INSERT INTO Cliente (cidade, nome) VALUES
    ('São Paulo', 'João da Silva'),
    ('Rio de Janeiro', 'Maria Santos'),
    ('Belo Horizonte', 'Pedro Souza');

-- Inserindo dados na tabela Pedidos
INSERT INTO Pedidos (data, valor, id_cliente) VALUES
    ('2023-07-27', 100.50, 1),
    ('2023-07-28', 75.25, 2),
    ('2023-07-28', 120.00, 3);

-- Inserindo dados na tabela Produto
INSERT INTO Produto (nome, preço) VALUES
    ('Camiseta', 29.99),
    ('Calça Jeans', 79.90),
    ('Tênis', 129.99);

-- Inserindo dados na tabela Pedidos_Produtos
INSERT INTO Pedidos_Produtos (id_pedido, id_produto, quantidade) VALUES
    (1, 1, 2),
    (1, 3, 1),
    (2, 1, 3),
    (3, 2, 2),
    (3, 3, 1);

-- Inserindo dados na tabela Categorias
INSERT INTO Categorias (nome) VALUES
    ('Vestuário'),
    ('Calçados'),
    ('Acessórios');

-- Inserindo dados na tabela Categorias_Produtos
INSERT INTO Categorias_Produtos (id_categoria, id_produto) VALUES
    (1, 1),
    (1, 2),
    (2, 3),
    (3, 1),
    (3, 2),
    (3, 3);

INSERT INTO Categorias_Produtos (id_categoria, id_produto) VALUES
    (1, 1),
    (1, 2),
    (2, 3),
    (3, 1),
    (3, 2),
    (3, 3);

    id_pedido INT PRIMARY KEY AUTO_INCREMENT,
    data DATE,
    valor DECIMAL(10, 2),
    id_cliente INT,
    FOREIGN KEY (id_cliente) REFERENCES Cliente(id_cliente) ON DELETE CASCADE
);

-- Tabela Produto
CREATE TABLE Produto (
    id_produto INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100),
    preço DECIMAL(10, 2)
);

-- Tabela Pedidos_Produtos (para resolver o relacionamento N:N entre Pedidos e Produtos)
CREATE TABLE Pedidos_Produtos (
    id_pedido INT,
    id_produto INT,
    quantidade INT,
    PRIMARY KEY (id_pedido, id_produto),
    FOREIGN KEY (id_pedido) REFERENCES Pedidos(id_pedido) ON DELETE CASCADE,
    FOREIGN KEY (id_produto) REFERENCES Produto(id_produto) ON DELETE CASCADE
);

-- Tabela Categorias
CREATE TABLE Categorias (
    id_categoria INT PRIMARY KEY AUTO_INCREMENT,
    nome VARCHAR(100)
);

-- Tabela Categorias_Produtos (para resolver o relacionamento 1:N entre Categorias e Produtos)
CREATE TABLE Categorias_Produtos (
    id_categoria INT,
    id_produto INT,
    PRIMARY KEY (id_categoria, id_produto),
    FOREIGN KEY (id_categoria) REFERENCES Categorias(id_categoria) ON DELETE CASCADE,
    FOREIGN KEY (id_produto) REFERENCES Produto(id_produto) ON DELETE CASCADE
);
